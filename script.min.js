const MIN_INVESTMENT=550,REFERRAL_EARNING=110,MIN_WITHDRAWAL=15000;let referralEarnings=0;function showError(e,t){const n=document.getElementById(e);n.style.border="2px solid red",(!n.nextSibling||!n.nextSibling.classList.contains("error-message"))&&(errorElement=document.createElement("div"),errorElement.className="error-message",errorElement.textContent=t,errorElement.style.color="red",n.parentNode.insertBefore(errorElement,n.nextSibling)),n.focus()}function resetForm(e){const t=document.getElementById(e);t.reset(),document.querySelectorAll(".error-message").forEach(e=>e.remove()),t.querySelectorAll("input").forEach(e=>{e.style.border=""});const n=document.getElementById("notification-area");n&&(n.textContent="")}function showSuccessMessage(e){const t=document.getElementById("notification-area");t.textContent=e,t.style.color="green"}function showErrorMessage(e){const t=document.getElementById("notification-area");t.textContent=e,t.style.color="red"}function validateField(e,t,n,o){return!!t.test(e)||(showError(o,n),!1)}function isValidNumber(e){return!isNaN(e)&&e>0}async function fetchMpesaTill(){return"3366998"}function initializeAccount(){const e=localStorage.getItem("totalInvestment")||0;document.getElementById("total-investment").textContent=`Kshs ${e}`}function updateAccountBalance(e){let t=parseFloat(localStorage.getItem("totalInvestment")||0);t+=e,localStorage.setItem("totalInvestment",t),document.getElementById("total-investment").textContent=`Kshs ${t}`}const joinForm=document.getElementById("join-form");joinForm&&joinForm.addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("name").value.trim(),n=document.getElementById("email").value.trim(),o=document.getElementById("phone").value.trim();if(resetForm("join-form"),!t)return void showError("name","Full Name is required.");if(!validateField(n,/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Please enter a valid email address.","email"))return;if(!validateField(o,/^07\d{8}$/,"Please enter a valid Kenyan phone number (e.g., 07XXXXXXXX).","phone"))return;const i=await fetchMpesaTill();if(t&&n&&o){const e=`<h3>Payment Instructions</h3><p>To complete your registration, please pay <strong>Kshs 550</strong> to the following M-Pesa Till Number:</p><p><strong>Till Number: ${i}</strong></p><p>Once payment is confirmed, you will receive a confirmation message.</p>`,t=document.getElementById("notification-area");t.innerHTML=e,t.style.color="black",t.style.backgroundColor="#f9f9f9",t.style.border="1px solid #ddd"}else showErrorMessage("Please fill in all required fields.")});const investmentForm=document.getElementById("investment-form");investmentForm&&investmentForm.addEventListener("submit",function(e){e.preventDefault();const t=parseFloat(document.getElementById("invest-amount").value.trim());isValidNumber(t)?(updateAccountBalance(t),showSuccessMessage(`You've successfully invested Kshs ${t}.`),resetForm("investment-form")):showError("invest-amount","Please enter a valid investment amount greater than 0.")});const paymentProofForm=document.getElementById("payment-proof-form");paymentProofForm&&paymentProofForm.addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("transaction-id").value.trim(),n=document.getElementById("phone-number").value.trim();t?validateField(n,/^07\d{8}$/,"Please enter a valid Kenyan phone number (e.g., 07XXXXXXXX).","phone-number")&&(showSuccessMessage("Your payment proof has been submitted. We will verify your payment and update your account shortly."),resetForm("payment-proof-form")):showError("transaction-id","Transaction ID is required.")}),document.addEventListener("DOMContentLoaded",initializeAccount);
